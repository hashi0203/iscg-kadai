<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title id="title">[utokyo-iscg-2020] Basic Assignment R2 (Shading Models)</title>
<script src="script.js"></script>
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=MML_SVG"></script>
<link rel="stylesheet" href="../style.css">
</head>
<body>
  <h2><a target="_blank" href="http://research.nii.ac.jp/~takayama/teaching/utokyo-iscg-2020/assignments/iscg-2020-assignment-r2-shading-models.pdf"><script type="text/javascript">document.write(document.getElementById("title").innerHTML);</script></a></h2>
  <h3>実装内容:</h3>
  <ul>
    <li>GLSL Sandbox を使用してレイトレーシングを1から実装</li>
    <li>カメラからレイを⾶ばして各物体との交点を計算</li>
    <li>球，三角形，平面，円錐との交点の計算</li>
    <li>各物体との交点から更にレイを飛ばして鏡面反射，屈折，フレネル反射，全反射を実装</li>
    <li>物質の屈折率やどういう反射をするかを指定可能</li>
    <li>点光源の位置と個数を自由に設定可能</li>
    <li>最終的に衝突した物体から点光源に向かってレイを飛ばして，影ができるかどうかを計算</li>
    <ul>
      <li>影は屈折や反射等を考慮していない</li>
      <li>屈折を起こす物体の影も考慮していない</li>
    </ul>
    <li>マウスの位置に応じて真ん中の灰色の球が移動</li>
    <li>カメラが上下に移動</li>
    <li>GLSL Sandbox の解像度を2に設定していると処理がかなり重くなってしまう</li>
    <ul>
      <li>できるだけ速く計算を切り上げたり，同じ計算を何度もしないように工夫したが，根本的な改善には至らなかった</li>
      <li>単純に反射回数と物体の個数が多いことが原因だと考えられる</li>
    </ul>
    <li>ソースコードは<a href="https://hashi0203-iscg-kadai.glitch.me/kadai-R2/script.js">こちら</a>にも掲載</li>
  </ul>
  
  <h3>CGの内容:</h3>
  <ul>
    <li>水中と空中にある物体をカメラが上下しながら移しているシーンをイメージ</li>
    <li>物体としては反射も屈折もしない物体，はんｓ</li>
  </ul>
  
  <h3>物体の変更・追加・移動:</h3>
  <ol>
    <li>const int OBJ_NUM を作成したいオブジェクトの個数に変更する</li>
    <li>main 関数内に objects[i] = (物体) のようにして物体を生成(物体は以下のものを指定可能)</li>
    <ul>
      <li>球：create_sphere(vec3 中心座標, float 半径, vec4 色)</li>
      <li>三角形：create_triangle(vec3 点a, vec3 点b, vec3 点c, vec4　色)</li>
      <li>平面：create_plane(vec3 平面上の1点a, vec3 法線ベクトル, vec4 色)</li>
      <li>円錐：create_cone(vec3 底面の円の中心座標, vec3 底面の中心から頂点へのベクトル(大きさは不問), float 底面半径, float 高さ, vec4 色)</li>
    </ul>
  </ol>
  
  <h3>その他設定の変更:</h3>
  <ol>
    <li>点光源の位置：const vec3 PLS = vec3(5,0,8); の(5,0,8)を変更</li>
    <li>反射回数：const int REFRECT_NUM = 3; の3を変更</li>
    <li>ランバート反射の輝度：const float IL = 1.0; の1.0を変更</li>
    <li>ピンホールとフィルムの距離：float l = 2.0; の2.0を変更</li>
    <li>フィルムの横幅(縦幅は解像度に合わせて自動で指定)：float film_w = 5.0; の5.0を変更</li>
    <li>カメラ(ピンホール)位置：vec3 c_from = vec3(sin(time*0.1)*10.0,cos(time*0.1)*10.0,6); の(sin(time*0.1)*10.0,cos(time*0.1)*10.0,6)を変更</li>
    <li>カメラの向いている先：vec3 c_to = vec3(0,0,0); の(0,0,0)を変更</li>
    <li>カメラのUPベクトル：vec3 c_up = vec3(5,0,10); の(5,0,10)を変更</li>
  </ol>
  
  <input type="button" onclick="location.href='../'" value="課題一覧へ">
  <input type="button" onclick="window.open('http://glslsandbox.com/e#64393.21')" target="_blank" value="課題へ">
  <div class="glitchButton" style="position:fixed;top:20px;right:20px;"></div>
  <script src="https://button.glitch.me/button.js"></script>
</body>
</html>

